{% extends "base_two_frames.html" %}

{% load utils %}

{% block aside %}

    <div class="pageheading-description block">
        <div class="row">
            <div class="col-xs-12">
                <h2>{{user.username}}</h2>
                {% if show_username %}
                    <div><i class="icon-record"></i>{{user.first_name}} {{user.last_name}}</div>
                {% endif %}

                {% if show_individual_mapper %}
                    <div><i class="icon-user"></i> Tree Mapper</div>
                {% endif %}
            </div>
        </div>
    </div>
    {% if viewing_own_profile %}
    <div class="pageheading-controls block">
        <div class="row">
            <div class="col-xs-6">
                {% if user.profile_is_public %}Public{% else %}Private{% endif %} Profile
            </div>
            {# A minor's profile is always private #}
            {% if not user.is_minor %}
            <div class="col-xs-6 text-right">
                <a class="btn btn-primary" href="#privacy-popup" data-toggle="modal">Privacy</a>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

{% endblock aside %}

{% block main %}

    {% if soft_launch %}
    <section class="soft-launch">
        {% with title="Your Profile" section_id="soft-launch" public=False %}
            {% include "users/partials/profile/soft_launch.html"%}
        {% endwith %}
    </section>
    {% else %}

    {% if show_contributions %}
    <section class="contributions">
        {% with title="Contributions" section_id="contributions" public=user.contributions_are_public %}
            {% include "users/partials/profile/contributions.html"%}
        {% endwith %}
    </section>
    {% endif %}

    {% if show_groups and follows.follows %}
    <section class="groups">
        {% with title="Groups" section_id="groups" public=user.group_follows_are_public %}
            {% include "users/partials/profile/groups.html" %}
        {% endwith %}
    </section>
    {% endif %}

    {% if show_achievements %}
    <section class="achievements">
        {% with title="Achievements" section_id="achievements" public=user.achievements_are_public %}
            {% include "users/partials/profile/achievements.html" with section_id="achievements" %}
        {% endwith %}
    </section>
    {% endif %}

    {% endif %}

    {% if viewing_own_profile and not user.profile_is_public and not user.is_minor %}
        <div class="block highlight">
            <h5>Tip:</h5>
            Want to share your progress and information with the tree mapping community?
            <a data-toggle="modal" href="#privacy-popup">Make your profile public!</a>
        </div>
    {% endif %}

{% endblock main %}

{% block page_js %}
    <script type="text/javascript" src="{{ "js/userProfile.js"|static_url }}"></script>
{% endblock page_js %}
